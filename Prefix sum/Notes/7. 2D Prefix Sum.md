## 1. Definition / Idea

Prefix sums extended to 2D matrices to answer submatrix sum queries in O(1).

## 2. Formula

```
prefix[i][j] = prefix[i-1][j] + prefix[i][j-1] 
               - prefix[i-1][j-1] + matrix[i][j]
```

## 3. Query Formula

```
submatrix_sum = prefix[r2][c2] - prefix[r2][c1-1] 
              - prefix[r1-1][c2] + prefix[r1-1][c1-1]
```

## 4. Example (Python)

```python
class NumMatrix:
    def __init__(self, matrix):
        rows, cols = len(matrix), len(matrix[0])
        self.prefix = [[0]*(cols+1) for _ in range(rows+1)]
        for i in range(rows):
            for j in range(cols):
                self.prefix[i+1][j+1] = (self.prefix[i+1][j] 
                                         + self.prefix[i][j+1] 
                                         - self.prefix[i][j] 
                                         + matrix[i][j])

    def sumRegion(self, r1, c1, r2, c2):
        return (self.prefix[r2+1][c2+1] - self.prefix[r1][c2+1]
                - self.prefix[r2+1][c1] + self.prefix[r1][c1])
```
